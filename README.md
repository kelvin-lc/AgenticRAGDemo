# Agentic RAG Demo ğŸš€

> ä¸€ä¸ªå±•ç¤ºAgentic RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ¶æ„çš„æ¼”ç¤ºé¡¹ç›®ï¼Œé€šè¿‡å¤šæ™ºèƒ½ä½“åä½œå®ç°å¢å¼ºçš„ä¿¡æ¯æ£€ç´¢å’Œæ¨ç†èƒ½åŠ›ã€‚

[![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.116+-green.svg)](https://fastapi.tiangolo.com/)
[![Agno](https://img.shields.io/badge/Agno-1.7.5+-purple.svg)](https://github.com/agno-ai/agno)
[![License](https://img.shields.io/badge/License-Apache%202.0-yellow.svg)](LICENSE)

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå…ˆè¿›çš„RAGç³»ç»Ÿï¼Œé€šè¿‡å¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“çš„åè°ƒå·¥ä½œï¼Œç›¸æ¯”ä¼ ç»Ÿçš„å•æ™ºèƒ½ä½“RAGæ–¹æ³•ï¼Œèƒ½å¤Ÿæä¾›æ›´å‡†ç¡®ã€å…¨é¢å’Œä¸Šä¸‹æ–‡ç›¸å…³çš„å“åº”ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šæ™ºèƒ½ä½“åä½œ** - åŸºäºAgnoæ¡†æ¶çš„æ™ºèƒ½ä½“åè°ƒç³»ç»Ÿ
- ğŸ” **æ™ºèƒ½æ£€ç´¢** - å¤šè½®è¿­ä»£çš„ä¿¡æ¯æ£€ç´¢å’Œæ¨ç†
- ğŸ“Š **çŸ¥è¯†èåˆ** - å¤šæºçŸ¥è¯†çš„æ™ºèƒ½æ•´åˆå’Œåˆ†æ
- ğŸš€ **é«˜æ€§èƒ½** - åŸºäºFastAPIçš„å¼‚æ­¥å¤„ç†æ¶æ„
- ğŸ¯ **ç²¾å‡†å›ç­”** - é€šè¿‡éªŒè¯æœºåˆ¶ç¡®ä¿ç­”æ¡ˆå‡†ç¡®æ€§

## ç³»ç»Ÿæ¶æ„

### é«˜å±‚æµç¨‹

```
å®¢æˆ·ç«¯åº”ç”¨ â†’ FastAPIæ¥å£å±‚ â†’ Agentic RAGæ ¸å¿ƒå±‚ â†’ çŸ¥è¯†å­˜å‚¨å±‚
      â†“              â†“              â†“              â†“
  Web/ç§»åŠ¨åº”ç”¨  â†’  RESTful API  â†’  æ™ºèƒ½ä½“åè°ƒ   â†’  å‘é‡æ•°æ®åº“
      â†“              â†“              â†“              â†“
  è¯·æ±‚/å“åº”   â†’  å¼‚æ­¥å¤„ç†æœºåˆ¶  â†’  å¤šè·³æ¨ç†é“¾æ„å»º â†’  MockçŸ¥è¯†åº“
```

### Agent Coordination Pipeline

```
ç”¨æˆ·http query â†’ query agent â†’ å¹¶è¡Œå¤šä¸ªretriaval agent â†’ extraction agent â†’ leader agent validation  â†’ finally answer
                â†“                â†“                          â†“                    â†“
            å®ä½“è¯†åˆ«            å‘é‡æ£€ç´¢                    å…³ç³»æ¨ç†              ç­”æ¡ˆéªŒè¯
            æŸ¥è¯¢åˆ†ç±»            æ‰©å±•æ£€ç´¢                    æ¨ç†é“¾æ„å»º            ç½®ä¿¡åº¦è¯„ä¼°  
```

## å„ä¸ªAgentä»‹ç»

ç›®å‰ç³»ç»Ÿé‡‡ç”¨åŸºäºTeamsçš„`Coordinate`æ¨¡å¼ï¼Œç”±leaderæ¥ç»Ÿä¸€æ§åˆ¶ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨èŒƒå¼çš„Workflowæ¨¡å¼ã€‚åŒ…å«ä»¥ä¸‹ä¸“ä¸šæ™ºèƒ½ä½“ï¼š

### 0. leader agent
    
**èŒè´£ï¼š**
- åè°ƒå¤šä¸ªretriaval agent å’Œ extraction agent
- è¿”å›æœ€ç»ˆç­”æ¡ˆç»™ç”¨æˆ·


### 1. æŸ¥è¯¢åˆ†ææ™ºèƒ½ä½“ (QueryAnalysisAgent)

**èŒè´£ï¼š**
- è§£æå’Œç†è§£ç”¨æˆ·æŸ¥è¯¢
- è¯†åˆ«å…³é”®å®ä½“å’Œå…³ç³»
- åˆ†ç±»æŸ¥è¯¢æ„å›¾å’Œé¢„æœŸç­”æ¡ˆç±»å‹

**è¾“å‡ºï¼š** ç»“æ„åŒ–çš„æŸ¥è¯¢æ„å›¾ï¼ŒåŒ…å«ä¸»è¦å®ä½“ã€æŸ¥è¯¢ç±»å‹å’Œé¢„æœŸå“åº”æ ¼å¼

### 2. å¤šä¸ªæ£€ç´¢æ™ºèƒ½ä½“ (RetrievalAgent)
å› ä¸ºAgentic RAG ä¸­çš„knowledgeå¯èƒ½æ¥ä¸ªå¤šä¸ªå®ä¾‹ï¼Œå¤šä¸ªæ— æ³•ä¸€æ¬¡retrievalå¾—åˆ°çš„chunkï¼Œæ‰€ä»¥éœ€è¦å¹¶è¡Œå¤šä¸ªretriaval agentã€‚
- å•ä¸ªretriaval agent å¯ä»¥å¾ªç¯è°ƒç”¨ã€‚
- å¤šä¸ªretriaval agent å¯ä»¥å¹¶è¡Œè°ƒç”¨ã€‚

**èŒè´£ï¼š** åŸºäºæŸ¥è¯¢åˆ†æç»“æœè¿›è¡Œå¤šè½®ä¿¡æ¯æ£€ç´¢

**èƒ½åŠ›ï¼š**
- **åˆå§‹æ£€ç´¢ï¼š** æœç´¢ä¸ä¸»è¦å®ä½“ç›¸å…³çš„æ–‡æ¡£
- **æ‰©å±•æ£€ç´¢ï¼š** åŸºäºåˆå§‹ç»“æœæŸ¥æ‰¾ç›¸å…³å®ä½“ä¿¡æ¯
- **è¿­ä»£æ£€ç´¢ï¼š** æŒç»­æ£€ç´¢ç›´åˆ°å»ºç«‹å®Œæ•´çš„æ¨ç†é“¾

### 3. æå–æ™ºèƒ½ä½“ (ExtractionAgent)

**èŒè´£ï¼š** æå–åˆ†ææ£€ç´¢åˆ°çš„ä¿¡æ¯ç‰‡æ®µï¼Œç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„çŸ¥è¯†

**èƒ½åŠ›ï¼š**
- ä¿¡æ¯å…³è”åˆ†æï¼Œæ„å»ºæ¨ç†é“¾
- æ¨ç†è·¯å¾„æ„å»ºï¼Œå€™é€‰ç­”æ¡ˆç”Ÿæˆ

### 4. éªŒè¯æ™ºèƒ½ä½“ (ValidationAgent)

**èŒè´£ï¼š** éªŒè¯æ¨ç†ç»“æœçš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§

**èƒ½åŠ›ï¼š**
- é€»è¾‘ä¸€è‡´æ€§éªŒè¯
- ä¿¡æ¯å®Œæ•´æ€§æ£€æŸ¥
- ç­”æ¡ˆç½®ä¿¡åº¦è¯„ä¼°

## çŸ¥è¯†åº“ç»“æ„

### MockçŸ¥è¯†åº“è®¾è®¡

ç³»ç»ŸåŒ…å«ä¸¤ä¸ªç”¨äºæ¼”ç¤ºçš„MockçŸ¥è¯†åº“ï¼š
ç”±äºmockæ•°æ®è¾ƒå°‘ï¼Œé¿å…chunkè¢«æ£€ç´¢åˆ°ï¼Œç›´æ¥ç”¨ä¸¤ä¸ªä¸åŒçš„knowledgeæ¥æ¨¡æ‹Ÿã€‚
- **`src/knowledges/projects_csv_knowledge.csv`ï¼š** å›¢é˜Ÿæˆå‘˜çš„é¡¹ç›®åˆ†é…å’Œè´¡çŒ®æƒ…å†µã€‚ `é‡Œé¢æ²¡æœ‰ä»»ä½•æå››çš„ä¿¡æ¯`
- **`src/knowledges/relationships_csv_knowledge.csv`ï¼š** äººé™…å…³ç³»å’Œå›¢é˜ŸåŠ¨æ€ã€‚ `é‡Œé¢æœ‰æå››å’Œå¼ ä¸‰çš„å…³è”ä¿¡æ¯`

### æŸ¥è¯¢å¤„ç†ç¤ºä¾‹

**æŸ¥è¯¢ï¼š** "æå››åšäº†å“ªäº›é¡¹ç›®ï¼Ÿ"

**å¤„ç†æµç¨‹ï¼š**
1. æŸ¥è¯¢åˆ†ææ™ºèƒ½ä½“è¯†åˆ«"æå››"ä¸ºä¸»è¦å®ä½“ï¼Œ"é¡¹ç›®"ä¸ºç›®æ ‡ä¿¡æ¯
2. åœ¨ä¸¤ä¸ªretriaval agentä¸­è¿›è¡Œæ£€ç´¢ï¼Œå¹¶è¡Œè¿›è¡Œ
3. è§£æå’Œæå–æ™ºèƒ½ä½“å¯èƒ½æ ¹æ®éœ€è¦æ‰©å±•æœç´¢åˆ°ç›¸å…³å›¢é˜Ÿæˆå‘˜
4. éªŒè¯æ™ºèƒ½ä½“ç¡®ä¿å“åº”çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§
5. è¿”å›æœ€ç»ˆç­”æ¡ˆç»™ç”¨æˆ·

### æ¨¡å—åŒ–è®¾è®¡ä¼˜åŠ¿

ç³»ç»Ÿè®¾è®¡å…·æœ‰æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä¾¿äºï¼š
- **å¯æ‰©å±•æ€§ï¼š** è½»æ¾æ·»åŠ æ–°çš„æ™ºèƒ½ä½“å’ŒåŠŸèƒ½
- **å¯ç»´æŠ¤æ€§ï¼š** éš”ç¦»çš„æ¨¡å—ä¾¿äºè°ƒè¯•å’Œæ›´æ–°
- **åä½œå¼€å‘ï¼š** å¤šä¸ªå¼€å‘è€…å¯ä»¥åŒæ—¶ä¸“æ³¨äºä¸åŒæ¨¡å—
- **æµ‹è¯•ï¼š** æ¯ä¸ªç»„ä»¶çš„ç‹¬ç«‹æµ‹è¯•

## å¿«é€Ÿå¼€å§‹

### ğŸ”§ ç¯å¢ƒè¦æ±‚
- ğŸ **Python**: 3.12+
- ğŸ“¦ **åŒ…ç®¡ç†å™¨**: uvï¼ˆæ¨èï¼‰æˆ– pip
- ğŸ”‘ **OpenAI APIå¯†é’¥**: æ”¯æŒå…¶ä»–æ¨¡å‹ï¼Œç¯å¢ƒå˜é‡å‡åœ¨ `config.py` ä¸­é…ç½®

### ğŸ“¦ å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone git@github.com:kelvin-lc/AgenticRAGDemo.git
cd AgenticRAGDemo
```

#### 2. å®‰è£…ä¾èµ–

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ uvï¼ˆæ¨èï¼‰**
```bash
uv sync
```

**æ–¹å¼äºŒï¼šä½¿ç”¨ pip**
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# æˆ–å®‰è£…æœ€å°ä¾èµ–
pip install -r requirements-minimal.txt
```

#### 3. è®¾ç½®ç¯å¢ƒå˜é‡
```bash
export OPENAI_API_KEY=your_openai_api_key
export OPENAI_MODEL=gpt-4.1-nano
```

### ğŸš€ å¯åŠ¨æœåŠ¡

#### æ–¹å¼ä¸€ï¼šIDE å¯åŠ¨
åœ¨ Cursor IDE ä¸­ç›´æ¥è¿è¡Œï¼Œä½¿ç”¨ `.vscode/launch.json` é…ç½®å¯åŠ¨

#### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨
```bash
uv run python src/main.py
```

#### æœåŠ¡è®¿é—®åœ°å€
- ğŸŒ **æœåŠ¡åœ°å€**: http://localhost:8001
- ğŸ“š **APIæ–‡æ¡£**: http://localhost:8001/docs
- ğŸ’š **å¥åº·æ£€æŸ¥**: http://localhost:8001/ping

### ğŸš€ å‘é€è¯·æ±‚

> **æ³¨æ„**ï¼šé»˜è®¤æ¨¡å‹è¾ƒå°ï¼Œpromptè¿˜æœªä¼˜åŒ–ï¼Œæ‰€ä»¥ç»“æœå¯èƒ½ä¸å‡†ç¡®ï¼Œå¯å°è¯•è¯·æ±‚å¤šæ¬¡

#### æ–¹å¼ä¸€ï¼šWeb UI ç•Œé¢
è®¿é—® [APIæ–‡æ¡£ç•Œé¢](http://localhost:8001/docs#/agent/run_agent_api_v1_agent_completions_post) ç›´æ¥ç‚¹å‡»å‘é€

#### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œè¯·æ±‚
```bash
curl -X POST http://localhost:8001/api/v1/agent/completions \
  -H "Content-Type: application/json" \
  -d '{
    "message": "æå››çš„é¡¹ç›®åç§°æ˜¯ä»€ä¹ˆ", 
    "user_id": "test_user", 
    "session_id": "test_session", 
    "stream": false
  }'
```

#### ç¤ºä¾‹å“åº”
```json
{
  "content": "æå››å‚ä¸çš„é¡¹ç›®åç§°æ˜¯ï¼š\n- æ™ºèƒ½å®¢æœç³»ç»Ÿ\n- ç§»åŠ¨ç«¯åº”ç”¨",
  "status": "success"
}
```

## å¼€å‘è·¯çº¿å›¾

### è®¡åˆ’åŠŸèƒ½
- [ ] æ”¯æŒç”¨æˆ·é€‰æ‹©ä¸åŒæ¨¡å‹
- [ ] Dockerå®¹å™¨åŒ–
- [ ] æ•°æ®æŒä¹…åŒ–å±‚
- [ ] æ€§èƒ½ã€è¯„ä¼°ç­‰æ¡†æ¶
- [ ] ç»¼åˆæ—¥å¿—ç³»ç»Ÿ
- [ ] æŒ‡æ ‡ç›‘æ§å’Œå‘Šè­¦
- [ ] å•å…ƒå’Œé›†æˆæµ‹è¯•
- [ ] CI/CDæµæ°´çº¿å®ç°

## è´¡çŒ®æŒ‡å—

[å¾…å®ç°ï¼šè´¡çŒ®æŒ‡å—]

## è®¸å¯è¯

[å¾…å®ç°ï¼šè®¸å¯è¯ä¿¡æ¯]